@page "/"
@using System.Net.Http
@using System.Net.Http.Json
@using System.Threading.Tasks
@inject HttpClient httpClient
@inject HttpClient Http
<MudStack Style="justify-content: space-between;" Class="mt-2" Row="true">
<MudText Typo="Typo.h6">Product List</MudText>
    <MudButton Href="create" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Add" Color="Color.Info">Create New</MudButton>
</MudStack>
@if (Product == null)
{
    <MudSkeleton />
    <MudSkeleton Animation="Animation.False" />
    <MudSkeleton Animation="Animation.Wave" />
    <MudSkeleton Animation="Animation.Wave" />
    <MudSkeleton Animation="Animation.Wave" />
    <MudSkeleton Animation="Animation.Wave" />
    <MudSkeleton Animation="Animation.Wave" />
    <MudSkeleton Animation="Animation.Wave" />
    <MudSkeleton Animation="Animation.Wave" />
    <MudSkeleton Animation="Animation.Wave" />
}
else
{
    <MudTable Items="@Product" Hover="true" Breakpoint="Breakpoint.Sm">
        <ToolBarContent>
            <MudText Typo="Typo.h6">Product List</MudText>
            <MudSpacer />
            <MudTextField @bind-Value="searchString1" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>Title</MudTh>
            <MudTh>Price</MudTh>
            <MudTh>CateID</MudTh>
            <MudTh>Added</MudTh>
            <MudTh>Action</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="title"><MudImage Src="@context.image" Width="70" Height="70" Alt="Swedish Farm House" Elevation="25" Class="rounded-lg ma-4" />@context.title </MudTd>
            <MudTd DataLabel="price">@context.price.ToString("#,### VNĐ")</MudTd>
            <MudTd DataLabel="categoryId">@context.categoryId</MudTd>
            <MudTd DataLabel="Added">@context.createdAt</MudTd>
            <MudTd DataLabel="Action">
                <MudMenu Icon="@Icons.Material.Filled.MoreVert">
                    <MudMenuItem>View</MudMenuItem>
                    <MudMenuItem>Edit</MudMenuItem>
                    <MudMenuItem>Delete</MudMenuItem>
                </MudMenu>
            </MudTd>
        </RowTemplate>
    </MudTable>
}

@code {
    private string searchString1 = "";
    private IEnumerable<Products>? Product = new List<Products>();
    protected override async Task OnInitializedAsync() =>
       Product = await httpClient.GetFromJsonAsync<List<Products>>("https://node-api-ecommerce.vercel.app/products");
   
}
